import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import * as serviceWorker from './serviceWorker';

//ğŸ¦„ 19-(2)-3 './'ì—†ì´ ë„£ì€ ê²½ë¡œì´ë¦„ : ì„¤ì¹˜í–ˆë˜ react library... ë¶ˆëŸ¬ì˜´(import)
// 19-(2)-4  <BrowserRouter> vs <HashRouter> 
//  HashRouterë¥¼ ë³µë¶™í•˜ì‹œë©´ ì‚¬ì´íŠ¸ ë°©ë¬¸ì‹œ URL ë§¨ ë’¤ì— /#/ì´ ë¶™ì€ì±„ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.
//  BrowserRouterë¥¼ ë³µë¶™í•˜ì‹œë©´ ì‚¬ì´íŠ¸ ë°©ë¬¸ì‹œ # ê·¸ëŸ°ê±° ì—†ì´ ê¹”ë”í•´ì§‘ë‹ˆë‹¤.

//  Q. URLì´ #ê¸°í˜¸ë¡œ ë“œëŸ¬ì›Œì§€ëŠ” HashRouterë¥¼ ì™œì“°ì£ ?
//  A. ì›ë˜ëŠ” ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ì— ë­”ê°€ í˜ì´ì§€ë¥¼ ì…ë ¥í•˜ë©´ ì„œë²„ì—ê²Œ íŠ¹ì • í˜ì´ì§€ì¢€ ë³´ì—¬ë‹¬ë¼ëŠ” ìš”ì²­ì´ ë©ë‹ˆë‹¤. 
//  ê·¼ë° ìš°ë¦¬ëŠ” ìš”ì²­í•  ì„œë²„ê°€ ì—†ê³  ê·¸ëƒ¥ ë¦¬ì•¡íŠ¸ê°€ ë¼ìš°íŒ…ì„ ë‹´ë‹¹í•˜ê³  ìˆìŠµë‹ˆë‹¤. 
//  ê·¸ë˜ì„œ ì˜ëª»í•˜ë©´ ìˆì§€ë„ ì•Šì€ í˜ì—ì§€ë¥¼ ì„œë²„ì— ìš”ì²­ì„ í•´ì„œ 404 Page Not Found ì´ëŸ° ì—ëŸ¬ë„ ëœ¨ê³  ê·¸ëŸ´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
//  ì‹¤ìˆ˜ë¡œ ì„œë²„ì—ê²Œ ìš”ì²­í•˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ì•ˆì „í•˜ê²Œ #ì„ ë¶™ì—¬ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. 
//  ì™œëƒë©´ ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ì—ì„œ # ë’¤ì— ë¶™ì€ ê²ƒë“¤ì€ ì ˆëŒ€ ì„œë²„ë¡œ ìš”ì²­ë˜ì§€ ì•Šìœ¼ë‹ˆê¹Œìš”.


//ğŸ¦„ 32c-(4)
// ê·¸ ë‹¤ìŒ reduxë¥¼ ì´ìš©í•œ ê°œë°œí™˜ê²½ì„ ì…‹íŒ…í•˜ì‹œë ¤ë©´ index.jsë¥¼ ì—´ì–´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤.

// 1 <Provider>ë¼ëŠ”ê±¸ import í•´ì˜¤ì‹  ë‹¤ìŒì— 
// import {Provider} from 'react-redux';

// 2 ë‚´ê°€ stateê°’ ê³µìœ ë¥¼ ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ ê°ì‹¸ì‹œë©´ ë©ë‹ˆë‹¤.
// ì €ëŠ” <App> ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ìŒŒìŠµë‹ˆë‹¤.
// ê·¸ëŸ¼ <App>ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ ì•ˆì—ìˆëŠ” ëª¨ë“  HTML, ì»´í¬ë„ŒíŠ¸ë“¤ì€ ì „ë¶€ stateë¥¼ ì§ì ‘! props ì „ì†¡ì—†ì´! ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
// <ì—ëŸ¬...'getState'ì–´ì©Œêµ¬> :  store ì¶”ê°€ì½”ë”© ëë‚´ë©´ ì‚¬ë¼ì§

// 3 reduxì—ì„œ stateë¥¼ í•˜ë‚˜ ë§Œë“œì‹œë ¤ë©´ createStore() í•¨ìˆ˜ë¥¼ ì“°ì…”ì•¼í•©ë‹ˆë‹¤. 
//  createStore(ì½œë°±í•¨ìˆ˜) ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì‹œë©´ ë˜ë©°, (ìë™ìœ¼ë¡œ importë¨ (or ì§ì ‘ import))
// ì½œë°±í•¨ìˆ˜ì—” ë‚´ê°€ ì›í•˜ëŠ” state ì´ˆê¸°ê°’ì„ ë„£ìŒ

// 4 ì´ì œ <Provider>ì— ë§Œë“  stateë¥¼ propsì²˜ëŸ¼ ë“±ë¡í•˜ë©´ ë
// ì´ëŸ¬ë©´ í•˜ìœ„ì»´í¬ë„Œí‹€ì´ propsì „ì†¡ì—†ì´ stateë¥¼ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.
// {id : 0, name : â€˜ë©‹ì§„ì‹ ë°œâ€™, quan : 2} ì´ë ‡ê²Œ ìƒê¸´ ì¥ë°”êµ¬ë‹ˆìš© ë°ì´í„° stateë¥¼ redux store ì•ˆì— ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
// (ê·¸ë¦¬ê³  redux ì„¤ì¹˜ í›„ì—” stateë“¤ì„ storeë¼ëŠ” ëª…ì¹­ìœ¼ë¡œ ë¶€ë¦…ë‹ˆë‹¤. ì•„ê¹Œ ë³€ìˆ˜ëª…ì´ storeì´ê¸°ë„ í•˜ê³ ìš”)


// ğŸ¦„33 -(4)
// reducer()í•¨ìˆ˜ : ë°ì´í„° ìˆ˜ì •í•˜ëŠ” ë²•ì€ reducerë¡œ ë§Œë“¬
// reducer : ìˆ˜ì •ëœ stateë¥¼ returní•˜ëŠ” í•¨ìˆ˜ 

// ê·¼ë° reducerëŠ” functionì•ˆì—
// 1. state ì´ˆê¸°ê°’ê³¼
// 2. state ë°ì´í„° ìˆ˜ì •ë°©ë²•ì´ ë“¤ì–´ìˆëŠ” í•¨ìˆ˜
// ê·¸ëŸ¼ ì¥ë°”êµ¬ë‹ˆ ë°ì´í„°ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆëŠ” reducerë¥¼ í•œë²ˆ ë§Œë“¤ì–´ë´…ì‹œë‹¤. 

// (5)
// 1. ë”°ë¡œ state ë³€ìˆ˜ë¥¼ ë§Œë“¤ê³ 
// 2. ê·¸ê±¸ reducerì— default íŒŒë¼ë¯¸í„° ë¬¸ë²•ìœ¼ë¡œ ì§‘ì–´ë„£ìŠµë‹ˆë‹¤.  

// (5)-2  default parameter ë¬¸ë²•
// reducerí•¨ìˆ˜ëŠ” í•­ìƒ stateë¥¼ returní•´ì•¼ë§Œ í•¨
// returní• ê²Œ ì—†ìœ¼ë©´ ì—ëŸ¬.
// ê·¸ë˜ì„œ ê¸°ë³¸stateë¥¼ íŒŒë¼ë¯¸í„°ì— ì§€ì •í•´ë‘ê³ , 
// returní• ê²Œ ì—†ìœ¼ë©´(ë°ì´í„° ìˆ˜ì • ì•ˆ í–ˆì„ë•Œ) ê¸°ë³¸stateë¥¼ returní•¨

// (6)
// ì´ì œ ì§„ì§œ reducer ì•ˆì— ê¸°ëŠ¥ê°œë°œì„ ì¢€ í•´ë³´ë„ë¡ í•©ì‹œë‹¤. 
// reducerëŠ” ë°ì´í„° ìˆ˜ì •ë°©ë²•ì„ ì •ì˜í•˜ëŠ” ê³³ì…ë‹ˆë‹¤.
// ê·¸ëƒ¥ ì´ëŸ° ì‹ìœ¼ë¡œ state ë°ì´í„° ìˆ˜ì •ë°©ë²• ì­‰ ë‚˜ì—´í•˜ì‹œë©´ ë©ë‹ˆë‹¤. 
// 1. "ìˆ˜ëŸ‰ì¦ê°€"ë¼ëŠ” ë°ì´í„° ìˆ˜ì •ë°©ë²• ì´ë¦„ì„ í•˜ë‚˜ ì‘ëª…í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. 
// (ì•¡ì…˜.type === ìˆ˜ëŸ‰ì¦ê°€) ì´ëŸ° ì‹ì…ë‹ˆë‹¤.
// 2. if , ìˆ˜ì •ë˜ë©´ ìˆ˜ì •ëœ state
// 3. else, ì•„ë‹ˆë©´ ì´ˆê¸°ê°’state return
// (ì˜ì–´ : initialState,action ) 

// (6)-2
// "parameter ì•¡ì…˜" ì˜ë¯¸ : 
// ì¼ë‹¨ ë¦¬ë•ìŠ¤ ì‚¬ìš©ë²• ì •ë¦¬ë¶€í„° í•˜ìë©´ 
// 1. reducerì— ë°ì´í„° ë³€ê²½ë°©ë²•ì„ ì­‰ ë‚˜ì—´í•´ë†“ìŠµë‹ˆë‹¤. 
// 2. ë‚˜ì¤‘ì— dispatch()ë¡œ reducerì— ìˆë˜ ë°ì´í„° ë³€ê²½ë°©ë²•ì„ ë™ì‘ì‹œí‚µë‹ˆë‹¤. 
 
// ê·¼ë° dispatch()ë¥¼ ì‚¬ìš©í•  ë• { type: ìˆ˜ëŸ‰ì¦ê°€ } ì´ëŸ°ê±¸ ì†Œê´„í˜¸ì•ˆì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// ì†Œê´„í˜¸ì•ˆì— ë„£ì€ ìë£ŒëŠ” reducer() ì˜ ê·¸ ë‘˜ì§¸ íŒŒë¼ë¯¸í„°ë¡œ ë„ì°©í•œë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. 
// (ìœ„ì—ì„œ ë‘˜ì§¸ íŒŒë¼ë¯¸í„°ëŠ” ì•¡ì…˜ì´ë¼ê³  ì´ë¦„ì§€ì–´ë†¨ê³ ìš”)
// ê·¸ë˜ì„œ ìœ„ì˜ ì½”ë“œëŠ”
// 1. { type: ìˆ˜ëŸ‰ì¦ê°€ } ê°€ dispatchì— ì‹¤ë ¤ì„œ ë„ì°©í•˜ë©´
// 2. stateë¥¼ ìˆ˜ëŸ‰ì¦ê°€í•´ì„œ return í•´ë¼ ë¼ëŠ” ëœ»ìœ¼ë¡œ reducerë¥¼ ê¸°ëŠ¥ê°œë°œí•´ë†“ì€ ê²ƒì…ë‹ˆë‹¤. 


// (6)-3
// ì§„ì§œ ë°ì´í„°ë¥¼ ìˆ˜ì •ë˜ê²Œ ë§Œë“¤ì–´ë´…ì‹œë‹¤.
// â€˜ìˆ˜ëŸ‰ì¦ê°€â€™ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ stateë°ì´í„°ì˜ ì²«ì§¸ ì•„ì´í…œì˜ quan í•­ëª©ì´ 1 ì¦ê°€í•˜ê²Œ í•´ë³´ê² ìŠµë‹ˆë‹¤.
// ê·¼ë° array, objectë¡œ êµ¬ì„±ëœ state ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ì‹œë ¤ë©´ ì‚¬ë³¸ì„ ë§Œë“œëŠ”ê²Œ ì¢‹ë‹¤ê³  í–ˆì£ 
// ê·¸ë˜ì„œ ê·¸ë ‡ê²Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤. 

//  ifë¬¸ ì•ˆì— ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ëŠ” 3ì¤„ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
// 1. deep copy (state ë°ì´í„° ì¹´í”¼ë³¸ì„ ë§Œë“¤ì–´ì„œ )
// 2. copyí•œê²ƒì„ ìˆ˜ì •. quan++ (quan í•­ëª©ì— 1ì„ ë”í•´ì£¼ê³  )
// 3. ìˆ˜ì •ëœ copy return (ê·¸ê±¸ returnìœ¼ë¡œ í‰¤ ë±‰ì—ˆìŠµë‹ˆë‹¤.  )
// (ê·¸ëƒ¥ í‰ì†Œì— í•˜ë˜ state ìˆ˜ì •ë°©ë²•ì…ë‹ˆë‹¤.)


import {BrowserRouter} from 'react-router-dom'

// 32-(4-1)
import {Provider, ReactReduxContext} from 'react-redux';

// 32c-(4-3)
import {createStore} from 'redux';

// 32c-(4-3)
// let store = createStore(()=>{ return[{ id : 0, name : 'ë©‹ì§„ì‹ ë°œ', quan : 2 }]   });


// 33c-(4)
// function reducer(){
//   return [{id : 0, name : 'ë©‹ì§„ì‹ ë°œ', quan : 2}, { id : 1, name : 'ë©‹ì§„ì‹ ë°œ22', quan : 3 }]
// }
// let store = createStore(reducer);

// 33c-(5)
let ê¸°ë³¸State = [ {id : 0, name : 'ë©‹ì§„ì‹ ë°œ', quan : 2}, 
{ id : 1, name : 'ë©‹ì§„ì‹ ë°œ22', quan : 3 } ];

// 33c-(5)-2 (6)-2
function reducer( state = ê¸°ë³¸State, ì•¡ì…˜){  
// 33c-(6) (6)-3
 if(ì•¡ì…˜.type ==='ìˆ˜ëŸ‰ì¦ê°€'){
 let copy = [...state];
 copy[0].quan++;
 return copy 
 }
//  33c-(8)
else if (ì•¡ì…˜.type ==='ìˆ˜ëŸ‰ê°ì†Œ'){
  let copy = [...state];
  copy[0].quan--;
  return copy 
 } 
 else{ 
  return state}
  }

let store = createStore(reducer);


// 
ReactDOM.render(  
  // 19-(2-2) index.html ê¸°ë³¸ì½”ë”© ë˜ì–´ìˆëŠ” ê²ƒ : index.htmlì—ì„œ id'root'ì¸ htmlì— Appì»´í¬ë„ŒíŠ¸ë¥¼ ë„£ì–´ë‹¬ë¼ëŠ” ëœ»

  // 19-(2-4)
  <React.StrictMode>
    <BrowserRouter>
    // 32c-(4)-2 . 32c-(4)-4
    <Provider store={store}>
    <App />
    </Provider>   
    </BrowserRouter>      
  </React.StrictMode>,
  document.getElementById('root')
);

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister();
